<!-- File: admin/admin-orders.html -->
<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Manage Orders</title><script src="https://cdn.tailwindcss.com"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script></head><body class="bg-gray-100"><div class="flex h-screen"><aside class="bg-indigo-800 text-white w-64 p-6 flex-shrink-0"><h1 class="text-2xl font-bold mb-8">Admin Panel</h1><nav class="space-y-2"><a href="admin.html" class="block px-4 py-2 rounded hover:bg-indigo-700">Dashboard</a><a href="admin-products.html" class="block px-4 py-2 rounded hover:bg-indigo-700">Products</a><a href="admin-orders.html" class="block px-4 py-2 rounded bg-indigo-900">Orders</a><button onclick="logout()" class="w-full text-left mt-8 px-4 py-2 rounded bg-red-600 hover:bg-red-700">Logout</button></nav></aside><main class="flex-1 p-8 overflow-auto"><h1 class="text-3xl font-bold mb-8">Manage Orders</h1><div class="bg-white p-6 rounded-lg shadow-md"><table class="w-full text-left"><thead><tr class="border-b"><th class="py-2">User Email</th><th class="py-2">Product</th><th class="py-2">Price</th><th class="py-2">Status</th><th class="py-2">Action</th></tr></thead><tbody id="orders-table"><tr><td colspan="5" class="text-center py-4">Loading...</td></tr></tbody></table></div></main></div>
<script src="../js/auth.js"></script>
<script>function loadOrders(){const e=document.getElementById("orders-table");db.collection("orders").orderBy("orderDate","desc").get().then(t=>{if(e.innerHTML="",t.empty)return void(e.innerHTML='<tr><td colspan="5" class="text-center py-4">No orders found.</td></tr>');t.forEach(t=>{const o=t.data(),d="completed"===o.status?"text-green-600":"text-yellow-600",r="pending"===o.status?`<button onclick="completeOrder('${t.id}')" class="bg-green-500 text-white text-sm px-3 py-1 rounded hover:bg-green-600">Mark Completed</button>`:`<span class="text-gray-500 text-sm">Completed</span>`;e.innerHTML+=`<tr class="border-b"><td class="py-3">${o.userEmail}</td><td class="py-3">${o.productName}</td><td class="py-3">à§³${o.price}</td><td class="py-3 font-semibold ${d}">${o.status}</td><td class="py-3">${r}</td></tr>`})})}function completeOrder(e){confirm("Are you sure?")&&db.collection("orders").doc(e).update({status:"completed"}).then(()=>{alert("Order completed!"),loadOrders()})}document.addEventListener("DOMContentLoaded",()=>{auth.onAuthStateChanged(async e=>{if(e){if(!(await isAdmin(e)))return void(window.location.href="../dashboard.html");loadOrders()}else window.location.href="../login.html"})});</script>
</body></html>