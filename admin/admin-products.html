<!-- File: admin/admin-products.html -->
<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Manage Products</title><script src="https://cdn.tailwindcss.com"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script></head><body class="bg-gray-100"><div class="flex h-screen"><aside class="bg-indigo-800 text-white w-64 p-6 flex-shrink-0"><h1 class="text-2xl font-bold mb-8">Admin Panel</h1><nav class="space-y-2"><a href="admin.html" class="block px-4 py-2 rounded hover:bg-indigo-700">Dashboard</a><a href="admin-products.html" class="block px-4 py-2 rounded bg-indigo-900">Products</a><a href="admin-orders.html" class="block px-4 py-2 rounded hover:bg-indigo-700">Orders</a><button onclick="logout()" class="w-full text-left mt-8 px-4 py-2 rounded bg-red-600 hover:bg-red-700">Logout</button></nav></aside><main class="flex-1 p-8 overflow-auto"><div class="flex justify-between items-center mb-8"><h1 class="text-3xl font-bold">Manage Products</h1></div><div class="bg-white p-6 rounded-lg shadow-md mb-8"><h2 class="text-xl font-semibold mb-4">Add New Product</h2><form id="add-product-form" class="grid grid-cols-1 md:grid-cols-2 gap-4"><input type="text" id="name" placeholder="Product Name" class="p-2 border rounded" required><input type="number" id="price" placeholder="Price (BDT)" class="p-2 border rounded" required><input type="text" id="imageUrl" placeholder="Image URL" class="p-2 border rounded"><input type="text" id="category" placeholder="Category" class="p-2 border rounded" required><textarea id="description" placeholder="Description" class="p-2 border rounded col-span-full" rows="4" required></textarea><div class="flex items-center col-span-full"><input type="checkbox" id="featured" class="mr-2"><label for="featured">Mark as Featured</label></div><button type="submit" class="bg-indigo-600 text-white py-2 px-4 rounded hover:bg-indigo-700">Add Product</button></form></div><div class="bg-white p-6 rounded-lg shadow-md"><h2 class="text-xl font-semibold mb-4">Existing Products</h2><table class="w-full text-left"><thead><tr class="border-b"><th class="py-2">Name</th><th class="py-2">Price</th><th class="py-2">Actions</th></tr></thead><tbody id="products-table"><tr><td colspan="3" class="text-center py-4">Loading...</td></tr></tbody></table></div></main></div>
<script src="../js/auth.js"></script>
<script>const addProductForm=document.getElementById("add-product-form");function loadProducts(){const e=document.getElementById("products-table");db.collection("products").orderBy("createdAt","desc").get().then(t=>{if(e.innerHTML="",t.empty)return void(e.innerHTML='<tr><td colspan="3" class="text-center py-4">No products found.</td></tr>');t.forEach(t=>{const o=t.data();e.innerHTML+=`<tr class="border-b"><td class="py-3">${o.name}</td><td class="py-3">à§³${o.price}</td><td class="py-3"><button onclick="deleteProduct('${t.id}')" class="text-red-500 hover:underline">Delete</button></td></tr>`})})}function deleteProduct(e){confirm("Are you sure?")&&db.collection("products").doc(e).delete().then(()=>{alert("Product deleted!"),loadProducts()})}document.addEventListener("DOMContentLoaded",()=>{auth.onAuthStateChanged(async e=>{if(e){if(!(await isAdmin(e)))return void(window.location.href="../dashboard.html");loadProducts()}else window.location.href="../login.html"}),addProductForm.addEventListener("submit",e=>{e.preventDefault(),db.collection("products").add({name:addProductForm.name.value,price:Number(addProductForm.price.value),imageUrl:addProductForm.imageUrl.value,category:addProductForm.category.value,description:addProductForm.description.value,featured:addProductForm.featured.checked,createdAt:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{alert("Product added!"),addProductForm.reset(),loadProducts()})})});</script>
</body></html>