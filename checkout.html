<!-- File: checkout.html -->
<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Checkout - ARIYAN PROJECT LAB</title><script src="https://cdn.tailwindcss.com"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script></head><body class="bg-gray-100"><nav class="bg-white shadow-md"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex items-center"><a href="/" class="text-2xl font-bold text-indigo-600">ARIYAN PROJECT LAB</a></div><div class="hidden md:flex items-center space-x-8" id="navbar-auth"></div></div></div></nav><main class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12"><div id="checkout-container" class="bg-white p-8 rounded-lg shadow-md"><h1 class="text-3xl font-bold text-center mb-6">Confirm Your Order</h1><div id="product-summary" class="text-center mb-6"><p>Loading product...</p></div><div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4 rounded-md mb-6" role="alert"><p class="font-bold">Payment Instructions</p><p>To complete your purchase, please use the "Send Money" option to the following number and then confirm your order.</p><ul class="list-disc list-inside mt-2"><li><strong>Bkash:</strong> 01300530335</li><li><strong>Nagad:</strong> 01300530335</li><li><strong>Upay:</strong> Coming Soon</li></ul><p class="mt-2 text-sm">After payment, contact us on <a href="https://t.me/Aruiyaaaa03" target="_blank" class="font-bold underline">Telegram</a> with a screenshot. We will verify and send you the product manually.</p></div><button id="confirm-order-btn" class="w-full bg-green-600 text-white py-3 rounded-md font-semibold text-lg hover:bg-green-700 disabled:bg-gray-400">Confirm Order</button></div></main>
<script src="/js/auth.js"></script>
<script>document.addEventListener("DOMContentLoaded",async function(){const e=new URLSearchParams(window.location.search).get("id"),t=document.getElementById("confirm-order-btn");if(t.disabled=!0,!e)return void(document.getElementById("checkout-container").innerHTML='<p class="text-red-500">No product selected.</p>');const o=await db.collection("products").doc(e).get();if(!o.exists)return void(document.getElementById("checkout-container").innerHTML='<p class="text-red-500">Product not found.</p>');const n=o.data();document.getElementById("product-summary").innerHTML=`
                <h2 class="text-2xl font-semibold">${n.name}</h2>
                <p class="text-3xl text-indigo-600 font-bold mt-2">Total: à§³${n.price}</p>
            `,auth.onAuthStateChanged(e=>{e?(t.disabled=!1):(t.textContent="Please Login to Confirm Order",t.onclick=()=>window.location.href="/login.html")}),t.addEventListener("click",()=>{const o=auth.currentUser;if(!o)return alert("You must be logged in to place an order."),void(window.location.href="/login.html");t.disabled=!0,t.textContent="Processing...",db.collection("orders").add({userId:o.uid,userEmail:o.email,productId:e,productName:n.name,price:n.price,status:"pending",orderDate:firebase.firestore.FieldValue.serverTimestamp()}).then(()=>{alert("Your order has been placed! It is now pending payment verification. Please contact us on Telegram."),window.location.href="/my-purchases.html"}).catch(e=>{alert("An error occurred: "+e.message),t.disabled=!1,t.textContent="Confirm Order"})})});</script>
</body></html>